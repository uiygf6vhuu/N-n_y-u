<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Game Tình Yêu 💘</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .game-container {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .heart-game {
            font-size: 80px;
            cursor: pointer;
            transition: all 0.2s;
            animation: heartbeat 1.5s infinite;
            margin: 20px 0;
        }
        .heart-game:active {
            transform: scale(1.3);
        }
        .score-display {
            font-size: 2.5em;
            color: #ff4757;
            font-weight: bold;
            margin: 20px 0;
        }
        .timer-display {
            font-size: 1.5em;
            color: #3742fa;
            margin: 10px 0;
        }
        .game-message {
            font-size: 1.3em;
            margin: 15px 0;
            min-height: 40px;
            font-weight: bold;
        }
        .game-btn {
            font-size: 1.2em;
            padding: 12px 30px;
            margin: 10px;
        }
        .level-indicator {
            background: linear-gradient(45deg, #ff9ff3, #f368e0);
            padding: 5px 15px;
            border-radius: 20px;
            color: white;
            display: inline-block;
            margin: 10px;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1.15); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>💘 Game Thử Thách Tình Yêu 💘</h1>
        <p>Click thật nhanh vào trái tim để thể hiện tình yêu của bạn!</p>
        
        <div class="level-indicator" id="levelInfo">Cấp độ: ❤️ Mới bắt đầu</div>
        <div class="timer-display">⏰ Thời gian: <span id="timer">30</span>s</div>
        <div class="score-display">💝 Điểm: <span id="score">0</span></div>
        
        <div class="heart-game" id="heart" onclick="clickHeart()">💖</div>
        
        <div class="game-message" id="message">Chuẩn bị sẵn sàng...!</div>
        
        <button class="game-btn" id="startBtn" onclick="startGame()">🎮 Bắt Đầu Game</button>
        <button class="game-btn" id="restartBtn" onclick="restartGame()" style="display:none;">🔁 Chơi Lại</button>
        
        <div class="game-stats" style="margin-top: 30px;">
            <div>🏆 Điểm cao nhất: <span id="highScore">0</span></div>
            <div>⚡ Tốc độ: <span id="speed">0</span> click/phút</div>
        </div>

        <div style="margin-top: 40px;">
            <a href="/" class="btn">🏠 Về Trang Chính</a>
            <a href="/admin" class="btn">🔐 Trang Admin</a>
        </div>
    </div>

    <script>
        let score = 0;
        let timeLeft = 30;
        let timer;
        let gameActive = false;
        let highScore = localStorage.getItem('loveGameHighScore') || 0;
        let startTime;
        let clickCount = 0;

        // Cấp độ và thông báo
        const levels = [
            { score: 0, name: "❤️ Mới bắt đầu", message: "Hãy bắt đầu thể hiện tình yêu!" },
            { score: 10, name: "💖 Có cảm tình", message: "Tình yêu đang lớn dần!" },
            { score: 25, name: "💘 Đang yêu", message: "Yêu nhau say đắm quá!" },
            { score: 50, name: "💕 Yêu nhiều", message: "Tình yêu ngập tràn!" },
            { score: 75, name: "💞 Yêu điên cuồng", message: "Yêu không thể kiểm soát!" },
            { score: 100, name: "💓 Yêu vô đối", message: "Tình yêu của bạn thật tuyệt vời!" }
        ];

        document.getElementById('highScore').textContent = highScore;

        function startGame() {
            if (gameActive) return;
            
            score = 0;
            timeLeft = 30;
            gameActive = true;
            clickCount = 0;
            startTime = Date.now();
            
            document.getElementById('score').textContent = score;
            document.getElementById('timer').textContent = timeLeft;
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('restartBtn').style.display = 'none';
            document.getElementById('message').textContent = "Click thật nhanh nào! 💕";
            document.getElementById('message').style.color = "#ff4757";
            
            updateLevel();
            
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;
                
                // Đổi màu timer khi sắp hết giờ
                if (timeLeft <= 10) {
                    document.getElementById('timer').style.color = "#ff4757";
                }
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function clickHeart() {
            if (!gameActive) {
                document.getElementById('message').textContent = '🎮 Hãy bấm "Bắt Đầu Game"!';
                return;
            }
            
            score++;
            clickCount++;
            document.getElementById('score').textContent = score;
            
            // Hiệu ứng
            const heart = document.getElementById('heart');
            heart.classList.add('pulse');
            setTimeout(() => heart.classList.remove('pulse'), 500);
            
            // Tính tốc độ
            const currentTime = Date.now();
            const elapsedTime = (currentTime - startTime) / 1000; // giây
            const clicksPerMinute = Math.round((clickCount / elapsedTime) * 60);
            document.getElementById('speed').textContent = clicksPerMinute;
            
            updateLevel();
        }

        function updateLevel() {
            let currentLevel = levels[0];
            for (let level of levels) {
                if (score >= level.score) {
                    currentLevel = level;
                }
            }
            
            document.getElementById('levelInfo').textContent = `Cấp độ: ${currentLevel.name}`;
            
            // Hiển thị thông báo đặc biệt ở một số mốc
            if ([10, 25, 50, 75, 100].includes(score)) {
                document.getElementById('message').textContent = currentLevel.message;
            }
        }

        function endGame() {
            clearInterval(timer);
            gameActive = false;
            
            // Cập nhật điểm cao
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('loveGameHighScore', highScore);
                document.getElementById('highScore').textContent = highScore;
            }
            
            // Thông báo kết quả
            let message = "";
            if (score < 10) {
                message = "💔 Cố gắng hơn nhé! Tình yêu cần nhiều nỗ lực!";
            } else if (score < 30) {
                message = "💖 Khá lắm! Tình yêu của bạn đang phát triển!";
            } else if (score < 60) {
                message = "💘 Tuyệt vời! Bạn yêu thật chân thành!";
            } else {
                message = "💕 Xuất sắc! Tình yêu của bạn thật mãnh liệt!";
            }
            
            document.getElementById('message').textContent = 
                `Game kết thúc! ${message} Điểm: ${score}`;
            document.getElementById('restartBtn').style.display = 'inline-block';
            document.getElementById('timer').style.color = "#3742fa";
        }

        function restartGame() {
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('restartBtn').style.display = 'none';
            document.getElementById('message').textContent = "Sẵn sàng cho lần chơi mới?";
            document.getElementById('timer').textContent = "30";
            document.getElementById('score').textContent = "0";
            document.getElementById('speed').textContent = "0";
            document.getElementById('timer').style.color = "#3742fa";
        }

        // Hiệu ứng khi di chuột vào trái tim
        document.getElementById('heart').addEventListener('mouseover', function() {
            if (gameActive) {
                this.style.cursor = 'pointer';
                this.style.transform = 'scale(1.2)';
            }
        });

        document.getElementById('heart').addEventListener('mouseout', function() {
            this.style.transform = 'scale(1)';
        });
    </script>
</body>
</html>
