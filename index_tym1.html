<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>K·ª∑ Ni·ªám C·ªßa Ch√∫ng Ta (Vi·ªÅn Tym 1) üíï</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* CSS CHUNG */
        html, body {
            height: 100%;
            padding: 0;
            margin: 0;
            background: #000;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        /* KHUNG HI·ªÇN TH·ªä ·∫¢NH V√Ä TH√îNG TIN */
        #content-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20; /* N·∫±m tr√™n hi·ªáu ·ª©ng n·ªÅn */
        }
        
        /* ·∫¢NH TIM ƒê·∫¨P */
        .love-image-tym {
            width: 250px;
            height: 250px;
            object-fit: cover;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
            border: 5px solid white;
            display: none;
            /* Animation Heartbeat */
            animation: heartbeat 1.5s infinite; 
        }

        @keyframes heartbeat {
            0% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 105, 180, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 30px rgba(255, 105, 180, 1); }
            100% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 105, 180, 0.7); }
        }

        .navigation { position: fixed; bottom: 20px; z-index: 30; }
        .btn { /* ƒê·∫£m b·∫£o n√∫t ƒë∆∞·ª£c k·∫ø th·ª´a t·ª´ style.css */ }

        /* ----------------------------------------------------------------------------------
         * IFRAME/CANVAS N·ªÄN (Ph·∫ßn n√†y ch·ªâ ƒë·ªÉ ch·∫°y hi·ªáu ·ª©ng Tym g·ªëc)
         * ---------------------------------------------------------------------------------- */
        #tym-iframe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            background-color: transparent; 
            z-index: 10;
        }
    </style>
</head>
<body>
    <iframe id="tym-iframe" src="tym1_bg" allowtransparency="true"></iframe>

    <div id="content-overlay">
        <h1 style="color: white; text-shadow: 0 0 10px #ff69b4;">K·ª∑ Ni·ªám C·ªßa Ch√∫ng Ta!</h1>
        <img id="loveImage" class="love-image-tym" style="display:none;">
        <p id="noImage" style="text-align: center; color: white; margin-top: 20px;">
            (Ch∆∞a c√≥ ·∫£nh n√†o ƒë∆∞·ª£c t·∫£i l√™n, vui l√≤ng t·∫£i ·∫£nh t·ª´ trang Admin!)
        </p>
    </div>

    <div id="navigation" class="navigation" style="display:none;">
        <a href="index.html" class="btn" style="background: #2ed573;">üíå Quay v·ªÅ Trang Ch√≠nh</a>
        <button class="btn" onclick="logout()" style="background: #ff4757;">üö™ Kh√≥a Trang</button>
    </div>

    <script>
        let sitePassword = localStorage.getItem('sitePassword');

        async function loadContent() {
            try {
                if (!sitePassword) {
                    alert('B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p tr∆∞·ªõc ƒë·ªÉ xem k·ª∑ ni·ªám n√†y!');
                    window.location.href = 'index.html';
                    return;
                }

                // G·ªçi API ƒë·ªÉ l·∫•y ·∫£nh (c·∫ßn m·∫≠t kh·∫©u)
                const imgResponse = await fetch('/api/love-image', {
                    headers: { 'Authorization': sitePassword }
                });

                const loveImage = document.getElementById('loveImage');
                const noImage = document.getElementById('noImage');
                
                document.getElementById('navigation').style.display = 'block';

                if (imgResponse.ok) {
                    const imgData = await imgResponse.json();

                    if (imgData.image) {
                        loveImage.src = imgData.image;
                        loveImage.style.display = 'block';
                        noImage.style.display = 'none';
                    } else {
                        loveImage.style.display = 'none';
                        noImage.textContent = 'Ch∆∞a c√≥ ·∫£nh n√†o ƒë∆∞·ª£c upload!';
                        noImage.style.display = 'block';
                    }
                } else {
                    loveImage.style.display = 'none';
                    noImage.textContent = 'L·ªói t·∫£i ·∫£nh ho·∫∑c ·∫£nh ch∆∞a ƒë∆∞·ª£c upload!';
                    noImage.style.display = 'block';
                }
            } catch (error) {
                console.error('L·ªói t·∫£i d·ªØ li·ªáu:', error);
                document.getElementById('noImage').textContent = 'L·ªói k·∫øt n·ªëi server.';
                document.getElementById('noImage').style.display = 'block';
            }
        }
        
        function logout() {
            // X√≥a m·∫≠t kh·∫©u v√† quay v·ªÅ trang ch√≠nh
            localStorage.removeItem('sitePassword');
            window.location.href = 'index.html'; 
        }

        document.addEventListener('DOMContentLoaded', loadContent);
    </script>
</body>
</html>
