<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>K·ª∑ Ni·ªám C·ªßa Ch√∫ng Ta (Vi·ªÅn Tym 1) üíï</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* CSS CHUNG */
        html, body { height: 100%; padding: 0; margin: 0; background: #000; overflow: hidden; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        
        /* IFRAME CH·ª®A HI·ªÜU ·ª®NG G·ªêC */
        #tym-iframe { position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; background-color: transparent; z-index: 10; }
        
        /* KHU V·ª∞C ·∫¢NH V√Ä N·ªòI DUNG */
        #content-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 20; text-align: center; }
        
        /* ·∫¢NH TIM ƒê·∫¨P */
        .love-image-tym {
            width: 250px; height: 250px; object-fit: cover; border-radius: 50%;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.9); border: 5px solid white;
            display: none; animation: heartbeat 1.5s infinite; 
        }

        @keyframes heartbeat {
            0% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 105, 180, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 30px rgba(255, 105, 180, 1); }
            100% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 105, 180, 0.7); }
        }

        .navigation { position: fixed; bottom: 20px; z-index: 30; }
    </style>
</head>
<body>
    <iframe id="tym-iframe" src="/tym1_bg" allowtransparency="true"></iframe>

    <div id="content-overlay">
        <h1 style="color: white; text-shadow: 0 0 10px #ff69b4;">K·ª∑ Ni·ªám C·ªßa Ch√∫ng Ta! (Hi·ªáu ·ª©ng 1)</h1>
        <img id="loveImage" class="love-image-tym" style="display:none;" alt="·∫¢nh K·ª∑ Ni·ªám">
        <p id="noImage" style="text-align: center; color: white; margin-top: 20px;"></p>
    </div>

    <div id="navigation" class="navigation" style="display:none;">
        <a href="/" class="btn" style="background: #2ed573;">üíå Quay v·ªÅ Trang Ch√≠nh</a>
        <button class="btn" onclick="logout()" style="background: #ff4757;">üö™ Kh√≥a Trang</button>
    </div>

    <script>
        let sitePassword = localStorage.getItem('sitePassword');

        async function loadContent() {
            // Logic t·∫£i ·∫£nh v√† ki·ªÉm tra m·∫≠t kh·∫©u gi·ªØ nguy√™n...
            try {
                if (!sitePassword) {
                    alert('B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p tr∆∞·ªõc ƒë·ªÉ xem k·ª∑ ni·ªám n√†y!');
                    window.location.href = '/';
                    return;
                }
                const imgResponse = await fetch('/api/love-image', { headers: { 'Authorization': sitePassword } });
                const loveImage = document.getElementById('loveImage');
                const noImage = document.getElementById('noImage');
                document.getElementById('navigation').style.display = 'block';

                if (imgResponse.ok) {
                    const imgData = await imgResponse.json();
                    if (imgData.image) {
                        loveImage.src = imgData.image;
                        loveImage.style.display = 'block';
                        noImage.style.display = 'none';
                    } else {
                        noImage.textContent = 'Ch∆∞a c√≥ ·∫£nh n√†o ƒë∆∞·ª£c t·∫£i l√™n!';
                        noImage.style.display = 'block';
                    }
                } else {
                    noImage.textContent = 'L·ªói t·∫£i ·∫£nh ho·∫∑c ·∫£nh ch∆∞a ƒë∆∞·ª£c upload!';
                    noImage.style.display = 'block';
                }
            } catch (error) {
                document.getElementById('noImage').textContent = 'L·ªói k·∫øt n·ªëi server.';
                document.getElementById('noImage').style.display = 'block';
            }
        }
        
        function logout() {
            localStorage.removeItem('sitePassword');
            window.location.href = '/'; 
        }

        document.addEventListener('DOMContentLoaded', loadContent);
    </script>
</body>
</html>
